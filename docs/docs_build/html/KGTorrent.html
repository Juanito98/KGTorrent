

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>KGTorrent package &mdash; KGTorrent  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="&lt;no title&gt;" href="modules.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> KGTorrent
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/replicating.html">Replicating the collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/refreshing.html">Refreshing the collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/using.html">Using the collection</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">KGTorrent package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-KGTorrent.kgtorrent">kgtorrent</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-KGTorrent.config">config</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-KGTorrent.db_communication_handler">db_communication_handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-KGTorrent.downloader">downloader</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-KGTorrent.exceptions">exceptions</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">KGTorrent</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">&lt;no title&gt;</a> &raquo;</li>
        
      <li>KGTorrent package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/KGTorrent.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-KGTorrent">
<span id="kgtorrent-package"></span><h1>KGTorrent package<a class="headerlink" href="#module-KGTorrent" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-KGTorrent.kgtorrent">
<span id="kgtorrent"></span><h2>kgtorrent<a class="headerlink" href="#module-KGTorrent.kgtorrent" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="KGTorrent.kgtorrent.main">
<code class="sig-prename descclassname">KGTorrent.kgtorrent.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#KGTorrent.kgtorrent.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Entry-point function for KGTorrent.
It orchestrates function/method calls to build and populate the KGTorrent database and dataset.</p>
</dd></dl>

</div>
<div class="section" id="module-KGTorrent.config">
<span id="config"></span><h2>config<a class="headerlink" href="#module-KGTorrent.config" title="Permalink to this headline">¶</a></h2>
<p>This is the configuration file of KGTorrent.</p>
<p>Here the main variables of the program are set, mostly by reading their values from environment variables.</p>
<p>See <a class="reference internal" href="configuration.html#configuration"><span class="std std-ref">Configuration</span></a> for details on the environment variables that must be set to run KGTorrent.</p>
</div>
<div class="section" id="module-KGTorrent.db_communication_handler">
<span id="db-communication-handler"></span><h2>db_communication_handler<a class="headerlink" href="#module-KGTorrent.db_communication_handler" title="Permalink to this headline">¶</a></h2>
<p>This module defines the class that handles the communication with the database via SQLAlchemy.</p>
<dl class="py class">
<dt id="KGTorrent.db_communication_handler.DbCommunicationHandler">
<em class="property">class </em><code class="sig-prename descclassname">KGTorrent.db_communication_handler.</code><code class="sig-name descname">DbCommunicationHandler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">db_username</span></em>, <em class="sig-param"><span class="n">db_password</span></em>, <em class="sig-param"><span class="n">db_host</span></em>, <em class="sig-param"><span class="n">db_port</span></em>, <em class="sig-param"><span class="n">db_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#KGTorrent.db_communication_handler.DbCommunicationHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class creates an SQLAlchemy engine and has methods for creating, populating and querying
a database with MetaKaggle data.</p>
<dl class="py method">
<dt id="KGTorrent.db_communication_handler.DbCommunicationHandler.create_new_db">
<code class="sig-name descname">create_new_db</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">drop_if_exists</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#KGTorrent.db_communication_handler.DbCommunicationHandler.create_new_db" title="Permalink to this definition">¶</a></dt>
<dd><p>This method creates a database with the provided name and builds schemas of MetaKaggle tables.
It throws by default an exception when the database already exists in order to avoid an initialization
called by mistake.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>drop_if_exists</strong> – If True the database is dropped before creation. By default it is False.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="KGTorrent.db_communication_handler.DbCommunicationHandler.db_exists">
<code class="sig-name descname">db_exists</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#KGTorrent.db_communication_handler.DbCommunicationHandler.db_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>This method checks whether the database exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if the database exists, False otherwise.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="KGTorrent.db_communication_handler.DbCommunicationHandler.get_nb_identifiers">
<code class="sig-name descname">get_nb_identifiers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">languages</span></em><span class="sig-paren">)</span><a class="headerlink" href="#KGTorrent.db_communication_handler.DbCommunicationHandler.get_nb_identifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>This method queries the database in order to retrieve slugs and identifiers of notebooks
written in the provided languages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>languages</strong> – A string array of notebook languages present in Kaggle.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> containing notebook slugs and identifiers.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>nb_identifiers</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="KGTorrent.db_communication_handler.DbCommunicationHandler.set_foreign_keys">
<code class="sig-name descname">set_foreign_keys</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">constraints_df</span></em><span class="sig-paren">)</span><a class="headerlink" href="#KGTorrent.db_communication_handler.DbCommunicationHandler.set_foreign_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>This method sets the foreign key constraints based on information provided by the related <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constraints_df</strong> – The <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> which contains the foreign key constraints information</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="KGTorrent.db_communication_handler.DbCommunicationHandler.write_tables">
<code class="sig-name descname">write_tables</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tables_dict</span></em><span class="sig-paren">)</span><a class="headerlink" href="#KGTorrent.db_communication_handler.DbCommunicationHandler.write_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>This method writes tables to the database by using the <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame.to_sql</span></code> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tables_dict</strong> – The dictionary whose keys are the table names and whose values are the <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> tables.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-KGTorrent.downloader">
<span id="downloader"></span><h2>downloader<a class="headerlink" href="#module-KGTorrent.downloader" title="Permalink to this headline">¶</a></h2>
<p>This module defines the class that handles the actual download of Jupyter notebooks from Kaggle.</p>
<dl class="py class">
<dt id="KGTorrent.downloader.Downloader">
<em class="property">class </em><code class="sig-prename descclassname">KGTorrent.downloader.</code><code class="sig-name descname">Downloader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nb_identifiers</span></em>, <em class="sig-param"><span class="n">nb_archive_path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#KGTorrent.downloader.Downloader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">Downloader</span></code> class handles the download of Jupyter notebooks from Kaggle.
It needs the notebook slugs and identifiers <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> in order to request
notebooks from Kaggle.
To do so it uses one of the following two strategies:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">HTTP</span></code></dt><dd><p>to download full notebooks via HTTP requests;</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">API</span></code></dt><dd><p>to download notebooks via calls to the official Kaggle API;
Jupyter notebooks downloaded by using this strategy always miss the output of code cells.</p>
</dd>
</dl>
<p>Notebooks that are already present in the download folder are skipped.
During the <code class="docutils literal notranslate"><span class="pre">refresh</span></code> procedure all those notebooks that are already present in the download folder
but are no longer referenced in the KGTorrent database are deleted.</p>
<dl class="py method">
<dt id="KGTorrent.downloader.Downloader.download_notebooks">
<code class="sig-name descname">download_notebooks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">strategy</span><span class="o">=</span><span class="default_value">'HTTP'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#KGTorrent.downloader.Downloader.download_notebooks" title="Permalink to this definition">¶</a></dt>
<dd><p>This method executes the download procedure using the provided strategy after checking the destination folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>strategy</strong> – The download strategy (<code class="docutils literal notranslate"><span class="pre">HTTP</span></code> or <code class="docutils literal notranslate"><span class="pre">API</span></code>). By default it is <code class="docutils literal notranslate"><span class="pre">HTTP</span></code>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-KGTorrent.exceptions">
<span id="exceptions"></span><h2>exceptions<a class="headerlink" href="#module-KGTorrent.exceptions" title="Permalink to this headline">¶</a></h2>
<p>This module defines exceptions that might be risen while building/updating KGTorrent using this package.</p>
<dl class="py exception">
<dt id="KGTorrent.exceptions.DatabaseExistsError">
<em class="property">exception </em><code class="sig-prename descclassname">KGTorrent.exceptions.</code><code class="sig-name descname">DatabaseExistsError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">message</span></em><span class="sig-paren">)</span><a class="headerlink" href="#KGTorrent.exceptions.DatabaseExistsError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#KGTorrent.exceptions.Error" title="KGTorrent.exceptions.Error"><code class="xref py py-class docutils literal notranslate"><span class="pre">KGTorrent.exceptions.Error</span></code></a></p>
<p>Exception raised when the database name already exists and has not been forced to remove.</p>
<dl class="py attribute">
<dt id="KGTorrent.exceptions.DatabaseExistsError.message">
<code class="sig-name descname">message</code><a class="headerlink" href="#KGTorrent.exceptions.DatabaseExistsError.message" title="Permalink to this definition">¶</a></dt>
<dd><p>short message containing the explanation of the error.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="KGTorrent.exceptions.Error">
<em class="property">exception </em><code class="sig-prename descclassname">KGTorrent.exceptions.</code><code class="sig-name descname">Error</code><a class="headerlink" href="#KGTorrent.exceptions.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Base class for exceptions in this package.</p>
</dd></dl>

<dl class="py exception">
<dt id="KGTorrent.exceptions.TableNotPreprocessedError">
<em class="property">exception </em><code class="sig-prename descclassname">KGTorrent.exceptions.</code><code class="sig-name descname">TableNotPreprocessedError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">message</span></em><span class="sig-paren">)</span><a class="headerlink" href="#KGTorrent.exceptions.TableNotPreprocessedError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#KGTorrent.exceptions.Error" title="KGTorrent.exceptions.Error"><code class="xref py py-class docutils literal notranslate"><span class="pre">KGTorrent.exceptions.Error</span></code></a></p>
<p>Exception raised when the table that was just read was supposed to be already preprocessed
(and serialized to .bz2 pickle file) but is not.</p>
<dl class="py attribute">
<dt id="KGTorrent.exceptions.TableNotPreprocessedError.message">
<code class="sig-name descname">message</code><a class="headerlink" href="#KGTorrent.exceptions.TableNotPreprocessedError.message" title="Permalink to this definition">¶</a></dt>
<dd><p>short message containing the explanation of the error.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="modules.html" class="btn btn-neutral float-left" title="&lt;no title&gt;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021, Collaborative Development Group

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>